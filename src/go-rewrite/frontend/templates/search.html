{{define "search"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search - Who Knows?</title>
    <link rel="stylesheet" type="text/css" href="/static/style.css">
</head>
<body>
    <div class="page">
        {{template "navigation" .}}
        
        <div class="body">
            <input id="search-input" placeholder="Search..." value="{{.Query}}" />
            <button onclick="makeSearchRequest()">Search</button>
        </div>

        <div id="results">
            {{range .SearchResults}}
            <div>
                <h2><a class="search-result-title" href="{{.URL}}">{{.Title}}</a></h2>
                <p class="search-result-description">{{.Description}}</p>
            </div>
            {{end}}
        </div>

        <script>
            let searchInput;

            document.addEventListener('DOMContentLoaded', () => {
                searchInput = document.getElementById("search-input");

                // Focus the input field
                searchInput.focus();

                // Search when the user presses Enter
                searchInput.addEventListener('keypress', (event) => {
                    if (event.key === 'Enter') {
                        makeSearchRequest();
                    }
                });
            });

            function makeSearchRequest() {
                const query = searchInput.value;
                const url = new URL(window.location.href);
                url.searchParams.set('q', query);
                window.location.href = url.toString();
            }
        </script>

        {{template "footer" .}}
    </div>
</body>
</html>
{{end}}
